{% extends "::base.html.twig" %}

{% block title %}Create book{% endblock %}

{% block body %}
    <h2>Create Book</h2>
    {{ form_start(form) }}
    <section class="col-md-7">
        <div class="row form-group">
            <div class="col-sm-2">{{ form_label(form.isbn) }}</div>
            <div class="col-sm-6">{{ form_widget(form.isbn, {'attr': {'class': 'form-control' }}) }}</div>
            <div class="col-sm-6">{{ form_errors(form.isbn) }}</div>
        </div>
        <div class="row form-group">
            <div class="col-sm-2">{{ form_label(form.author) }}</div>
            <div class="col-sm-6">{{ form_widget(form.author, {'attr': {'class': 'form-control' }}) }}</div>
            <div class="col-sm-6">{{ form_errors(form.author) }}</div>
        </div>

        <div class="row form-group">
            <div class="col-sm-2">{{ form_label(form.title) }}</div>
            <div class="col-sm-6">{{ form_widget(form.title, {'attr': {'class': 'form-control' }}) }}</div>
            <div class="col-sm-6">{{ form_errors(form.title) }}</div>
        </div>
        <div class="row form-group">
            <div class="col-sm-2">{{ form_label(form.genre_id) }}</div>
            <div class="col-sm-6">{{ form_widget(form.genre_id, {'attr': {'class': 'form-control' }}) }}</div>
            <div class="col-sm-6">{{ form_errors(form.genre_id) }}</div>
        </div>
        <div class="row form-group">
            <div class="col-sm-2">{{ form_label(form.bookDescription) }}</div>
            <div class="col-sm-6">{{ form_widget(form.bookDescription, {'attr': {'class': 'form-control', 'rows': '6','maxlength':'300','col':'40'  }}) }}</div>
            <div class="col-sm-6">{{ form_errors(form.bookDescription) }}</div>
        </div>

        <div class="row form-group">
            <div class="col-sm-2">{{ form_label(form.cover_image) }}</div>
            <div class="col-sm-6">{{ form_widget(form.cover_image, {'attr': {'class': 'form-control' }}) }}</div>
            <div class="col-sm-6">{{ form_errors(form.cover_image) }}</div>
        </div>
        {{ form_row(form.submit,{'attr': {'class': 'btn btn-primary' }}) }}
        {{ form_end(form) }}
    </section>
    <section class="col-sm-offset-1 col-sm-5 form-horizontal search-section">
        <h3 class="suggestions-heading">Book search</h3>
        <div class="form-group">
            <input class="form-control" id="search_book_title" type="text" placeholder="Search title">
        </div>
        <div class="form-group">
            <input class="form-control" id="search_book_author" type="text" placeholder="Search author">
        </div>
        <section class="book-suggestions">
            <h3>Matches:</h3>
            <table id="suggestionsTable">
            </table>
        </section>
    </section>
    <script>
        var titleElem = document.getElementById("reviewer_reviewbundle_book_title");
        var authorElem = document.getElementById("reviewer_reviewbundle_book_author");
        var isbnElem = document.getElementById("reviewer_reviewbundle_book_isbn");
        var synopsisElem = document.getElementById("reviewer_reviewbundle_book_bookDescription");
        var titleSearch = document.getElementById("search_book_title");
        var authorSearch = document.getElementById("search_book_author");
        var suggestionsElem = document.getElementById("suggestionsTable");

        titleSearch.addEventListener("blur", function () {
            findSuggestedBooks(this.value, authorSearch.value)
        });
        authorSearch.addEventListener("blur", function () {
            findSuggestedBooks(titleSearch.value, this.value)
        });
    </script>
{% endblock %}

